"""
plf::hive is a fork of plf::colony to match the current C++ standards proposal (https://wg21.link/p0447).
"""

load("@rules_cc//cc:defs.bzl", "cc_library")

SUPPORTED_CPP_STANDARDS = [
    "20",
    "23",
    "2b",
    "26",
]

[config_setting(
    name = "is_cpp" + v,
    values = {"cxxopt": "-std=c++" + v},
) for v in SUPPORTED_CPP_STANDARDS]

cc_library(
    name = "plf_hive",
    hdrs = [
        "plf_hive.h",
    ],
    includes = ["."],
    target_compatible_with = select(
        {":is_cpp" + v: [] for v in SUPPORTED_CPP_STANDARDS} |
        {"//conditions:default": ["@platforms//:incompatible"]},
    ),
    visibility = ["//visibility:public"],
)
